<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Usage Research Survey</title>
    <link rel="shortcut icon" href="surveyor.png" type="image/png">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f8fa;
            color: #333;
        }
        .container {
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #1da1f2;
            text-align: center;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }
        input[type="text"],
        input[type="email"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }
        .checkbox-group, .radio-group {
            margin-bottom: 15px;
        }
        .checkbox-group label, .radio-group label {
            font-weight: normal;
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        .checkbox-group input, .radio-group input {
            margin-right: 10px;
            width: auto;
        }
        button {
            background-color: #1da1f2;
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            display: block;
            margin: 20px auto 0;
            width: 200px;
        }
        button:hover {
            background-color: #0d8bd9;
        }
        .section {
            border-top: 1px solid #eee;
            padding-top: 20px;
            margin-top: 30px;
        }
        .section-title {
            color: #1da1f2;
            margin-bottom: 20px;
        }
        .required:after {
            content: " *";
            color: red;
        }
        .privacy-note {
            font-size: 14px;
            color: #666;
            margin-top: 30px;
            text-align: center;
        }
        #successMessage {
            display: none;
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            text-align: center;
        }
        #errorMessage {
            display: none;
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
            margin-top: 20px;
            text-align: center;
        }
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        .loader {
            border: 5px solid #f3f3f3;
            border-top: 5px solid #1da1f2;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Social Media Usage Research Survey</h1>
        
        <p>Thank you for participating in our research study on social media usage patterns. Your responses will help us understand how people interact with social media platforms and their impact on daily life. This survey should take approximately 3-5 minutes to complete.</p>
        
        <form id="socialMediaSurvey">
            <!-- Demographic Section -->
            <div class="section">
                <h2 class="section-title">Demographic Information</h2>
                
                <div class="form-group">
                    <label for="age" class="required">Age</label>
                    <select id="age" name="age" required>
                        <option value="">Select your age range</option>
                        <option value="under18">Under 18</option>
                        <option value="18-24">18-24</option>
                        <option value="25-34">25-34</option>
                        <option value="35-44">35-44</option>
                        <option value="45-54">45-54</option>
                        <option value="55-64">55-64</option>
                        <option value="65+">65 or older</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="gender" class="required">Gender</label>
                    <select id="gender" name="gender" required>
                        <option value="">Select your gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="nonbinary">Non-binary</option>
                        <option value="other">Other</option>
                        <option value="prefer_not">Prefer not to say</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="education">Highest Level of Education</label>
                    <select id="education" name="education">
                        <option value="">Select your education level</option>
                        <option value="highSchool">High School or equivalent</option>
                        <option value="someCollege">Some College</option>
                        <option value="associate">Associate Degree</option>
                        <option value="bachelor">Bachelor's Degree</option>
                        <option value="master">Master's Degree</option>
                        <option value="doctorate">Doctorate or higher</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="occupation">Occupation</label>
                    <input type="text" id="occupation" name="occupation" placeholder="What is your current occupation?">
                </div>
            </div>
            
            <!-- Social Media Usage Section -->
            <div class="section">
                <h2 class="section-title">Social Media Usage</h2>
                
                <div class="form-group">
                    <label class="required">Which social media platforms do you currently use? (Select all that apply)</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="platforms" value="facebook"> Facebook</label>
                        <label><input type="checkbox" name="platforms" value="instagram"> Instagram</label>
                        <label><input type="checkbox" name="platforms" value="twitter"> Twitter/X</label>
                        <label><input type="checkbox" name="platforms" value="tiktok"> TikTok</label>
                        <label><input type="checkbox" name="platforms" value="youtube"> YouTube</label>
                        <label><input type="checkbox" name="platforms" value="linkedin"> LinkedIn</label>
                        <label><input type="checkbox" name="platforms" value="pinterest"> Pinterest</label>
                        <label><input type="checkbox" name="platforms" value="snapchat"> Snapchat</label>
                        <label><input type="checkbox" name="platforms" value="reddit"> Reddit</label>
                        <label><input type="checkbox" name="platforms" value="whatsapp"> WhatsApp</label>
                        <label><input type="checkbox" name="platforms" value="discord"> Discord</label>
                        <label><input type="checkbox" name="platforms" value="other"> Other</label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="primary_platform" class="required">Which social media platform do you use most frequently?</label>
                    <select id="primary_platform" name="primary_platform" required>
                        <option value="">Select your most used platform</option>
                        <option value="facebook">Facebook</option>
                        <option value="instagram">Instagram</option>
                        <option value="twitter">Twitter/X</option>
                        <option value="tiktok">TikTok</option>
                        <option value="youtube">YouTube</option>
                        <option value="linkedin">LinkedIn</option>
                        <option value="pinterest">Pinterest</option>
                        <option value="snapchat">Snapchat</option>
                        <option value="reddit">Reddit</option>
                        <option value="whatsapp">WhatsApp</option>
                        <option value="discord">Discord</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="daily_usage" class="required">How much time do you spend on social media daily?</label>
                    <select id="daily_usage" name="daily_usage" required>
                        <option value="">Select time range</option>
                        <option value="less_than_1">Less than 1 hour</option>
                        <option value="1_to_2">1-2 hours</option>
                        <option value="2_to_3">2-3 hours</option>
                        <option value="3_to_4">3-4 hours</option>
                        <option value="4_to_5">4-5 hours</option>
                        <option value="more_than_5">More than 5 hours</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="usage_frequency" class="required">How often do you check social media?</label>
                    <select id="usage_frequency" name="usage_frequency" required>
                        <option value="">Select frequency</option>
                        <option value="constantly">Constantly throughout the day</option>
                        <option value="hourly">Every hour</option>
                        <option value="few_times">A few times a day</option>
                        <option value="once_daily">Once a day</option>
                        <option value="few_times_week">A few times a week</option>
                        <option value="less_often">Less often</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="years_using">How many years have you been using social media?</label>
                    <input type="number" id="years_using" name="years_using" min="0" max="30" placeholder="Enter number of years">
                </div>
            </div>
            
            <!-- Submit Button -->
            <button type="submit">Submit Survey</button>
            
            <div id="loading" class="loading">
                <div class="loader"></div>
                <p>Submitting your response...</p>
            </div>
            
            <div id="successMessage">Thank you for completing the survey! Your response has been recorded.</div>
            <div id="errorMessage">There was an error submitting your survey. Please try again later.</div>
            
            <p class="privacy-note">Your responses will be kept confidential and used only for research purposes. No personally identifiable information will be shared with third parties.</p>
        </form>
    </div>

    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <!-- Firebase Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <script>
        // Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyD1k-7pLYoM3aEYnCdZnAfN2LSTqO9J7RU",
          authDomain: "social-media-survey-3afd1.firebaseapp.com",
          projectId: "social-media-survey-3afd1",
          storageBucket: "social-media-survey-3afd1.appspot.com", // Fixed the storage bucket URL
          messagingSenderId: "737065119291",
          appId: "1:737065119291:web:c17d0efa6bb28c5d1fb61e",
          measurementId: "G-DVZVM8MBGJ"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        
        // Get a reference to the Firestore database
        const db = firebase.firestore();
        
        // Validation function
        function validateForm() {
            // Check required fields
            const requiredFields = ['age', 'gender', 'primary_platform', 'daily_usage', 'usage_frequency'];
            let isValid = true;
            
            requiredFields.forEach(field => {
                const element = document.getElementById(field);
                if (!element.value) {
                    element.style.border = '1px solid red';
                    isValid = false;
                } else {
                    element.style.border = '1px solid #ddd';
                }
            });
            
            // Check if at least one platform is selected
            const platforms = document.querySelectorAll('input[name="platforms"]:checked');
            if (platforms.length === 0) {
                document.querySelector('.checkbox-group').style.border = '1px solid red';
                isValid = false;
            } else {
                document.querySelector('.checkbox-group').style.border = 'none';
            }
            
            return isValid;
        }
        
        // Handle form submission
        document.getElementById('socialMediaSurvey').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Validate form
            if (!validateForm()) {
                document.getElementById('errorMessage').textContent = 'Please fill in all required fields.';
                document.getElementById('errorMessage').style.display = 'block';
                setTimeout(() => {
                    document.getElementById('errorMessage').style.display = 'none';
                }, 3000);
                return;
            }
            
            // Show loading indicator
            document.getElementById('loading').style.display = 'block';
            
            // Get form data
            const formData = new FormData(this);
            const data = {};
            
            // Process form fields
            for (let [key, value] of formData.entries()) {
                if (key !== 'platforms') {
                    data[key] = value;
                }
            }
            
            // Process checkboxes (platforms)
            const platforms = [];
            const checkboxes = document.querySelectorAll('input[name="platforms"]:checked');
            checkboxes.forEach(checkbox => {
                platforms.push(checkbox.value);
            });
            data.platforms = platforms;
            
            // Add timestamp
            data.timestamp = firebase.firestore.FieldValue.serverTimestamp();
            
            // Submit to Firestore
            db.collection("survey_responses").add(data)
                .then(() => {
                    // Hide loading indicator
                    document.getElementById('loading').style.display = 'none';
                    // Show success message
                    document.getElementById('successMessage').style.display = 'block';
                    // Reset form
                    document.getElementById('socialMediaSurvey').reset();
                    // Hide success message after 5 seconds
                    setTimeout(() => {
                        document.getElementById('successMessage').style.display = 'none';
                    }, 5000);
                })
                .catch((error) => {
                    console.error("Error adding document: ", error);
                    // Hide loading indicator
                    document.getElementById('loading').style.display = 'none';
                    // Show detailed error message
                    document.getElementById('errorMessage').textContent = 'Error: ' + error.message;
                    document.getElementById('errorMessage').style.display = 'block';
                });
        });
    </script>
</body>
</html>